/*! PILab 11-05-2018 (c) 2017 propertyindicators@gmail.com */

"use strict";function packIEEE754(a,b,c){var d,e,f,g=new Array(c),h=8*c-b-1,i=(1<<h)-1,j=i>>1,k=23===b?pow(2,-24)-pow(2,-77):0,l=0,m=a<0||0===a&&1/a<0?1:0;for(a=abs(a),a!=a||a===Infinity?(e=a!=a?1:0,d=i):(d=floor(log(a)/LN2),a*(f=pow(2,-d))<1&&(d--,f*=2),a+=d+j>=1?k/f:k*pow(2,1-j),a*f>=2&&(d++,f/=2),d+j>=i?(e=0,d=i):d+j>=1?(e=(a*f-1)*pow(2,b),d+=j):(e=a*pow(2,j-1)*pow(2,b),d=0));b>=8;g[l++]=255&e,e/=256,b-=8);for(d=d<<b|e,h+=b;h>0;g[l++]=255&d,d/=256,h-=8);return g[--l]|=128*m,g}function unpackIEEE754(a,b,c){var d,e=8*c-b-1,f=(1<<e)-1,g=f>>1,h=e-7,i=c-1,j=a[i--],k=127&j;for(j>>=7;h>0;k=256*k+a[i],i--,h-=8);for(d=k&(1<<-h)-1,k>>=-h,h+=b;h>0;d=256*d+a[i],i--,h-=8);if(0===k)k=1-g;else{if(k===f)return d?NaN:j?-Infinity:Infinity;d+=pow(2,b),k-=g}return(j?-1:1)*d*pow(2,k-b)}function unpackI32(a){return a[3]<<24|a[2]<<16|a[1]<<8|a[0]}function packI8(a){return[255&a]}function packI16(a){return[255&a,a>>8&255]}function packI32(a){return[255&a,a>>8&255,a>>16&255,a>>24&255]}function packF64(a){return packIEEE754(a,52,8)}function packF32(a){return packIEEE754(a,23,4)}function addGetter(a,b,c){dP(a[PROTOTYPE],b,{get:function(){return this[c]}})}function get(a,b,c,d){var e=+c,f=toIndex(e);if(f+b>a[$LENGTH])throw RangeError(WRONG_INDEX);var g=a[$BUFFER]._b,h=f+a[$OFFSET],i=g.slice(h,h+b);return d?i:i.reverse()}function set(a,b,c,d,e,f){var g=+c,h=toIndex(g);if(h+b>a[$LENGTH])throw RangeError(WRONG_INDEX);for(var i=a[$BUFFER]._b,j=h+a[$OFFSET],k=d(+e),l=0;l<b;l++)i[j+l]=k[f?l:b-l-1]}var global=require("./_global"),DESCRIPTORS=require("./_descriptors"),LIBRARY=require("./_library"),$typed=require("./_typed"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),fails=require("./_fails"),anInstance=require("./_an-instance"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),toIndex=require("./_to-index"),gOPN=require("./_object-gopn").f,dP=require("./_object-dp").f,arrayFill=require("./_array-fill"),setToStringTag=require("./_set-to-string-tag"),ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length!",WRONG_INDEX="Wrong index!",$ArrayBuffer=global[ARRAY_BUFFER],$DataView=global[DATA_VIEW],Math=global.Math,RangeError=global.RangeError,Infinity=global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,BUFFER="buffer",BYTE_LENGTH="byteLength",BYTE_OFFSET="byteOffset",$BUFFER=DESCRIPTORS?"_b":BUFFER,$LENGTH=DESCRIPTORS?"_l":BYTE_LENGTH,$OFFSET=DESCRIPTORS?"_o":BYTE_OFFSET;if($typed.ABV){if(!fails(function(){$ArrayBuffer(1)})||!fails(function(){new $ArrayBuffer(-1)})||fails(function(){return new $ArrayBuffer,new $ArrayBuffer(1.5),new $ArrayBuffer(NaN),$ArrayBuffer.name!=ARRAY_BUFFER})){$ArrayBuffer=function(a){return anInstance(this,$ArrayBuffer),new BaseBuffer(toIndex(a))};for(var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE],keys=gOPN(BaseBuffer),j=0,key;keys.length>j;)(key=keys[j++])in $ArrayBuffer||hide($ArrayBuffer,key,BaseBuffer[key]);LIBRARY||(ArrayBufferProto.constructor=$ArrayBuffer)}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||redefineAll($DataView[PROTOTYPE],{setInt8:function(a,b){$setInt8.call(this,a,b<<24>>24)},setUint8:function(a,b){$setInt8.call(this,a,b<<24>>24)}},!0)}else $ArrayBuffer=function(a){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var b=toIndex(a);this._b=arrayFill.call(new Array(b),0),this[$LENGTH]=b},$DataView=function(a,b,c){anInstance(this,$DataView,DATA_VIEW),anInstance(a,$ArrayBuffer,DATA_VIEW);var d=a[$LENGTH],e=toInteger(b);if(e<0||e>d)throw RangeError("Wrong offset!");if(c=void 0===c?d-e:toLength(c),e+c>d)throw RangeError(WRONG_LENGTH);this[$BUFFER]=a,this[$OFFSET]=e,this[$LENGTH]=c},DESCRIPTORS&&(addGetter($ArrayBuffer,BYTE_LENGTH,"_l"),addGetter($DataView,BUFFER,"_b"),addGetter($DataView,BYTE_LENGTH,"_l"),addGetter($DataView,BYTE_OFFSET,"_o")),redefineAll($DataView[PROTOTYPE],{getInt8:function(a){return get(this,1,a)[0]<<24>>24},getUint8:function(a){return get(this,1,a)[0]},getInt16:function(a){var b=get(this,2,a,arguments[1]);return(b[1]<<8|b[0])<<16>>16},getUint16:function(a){var b=get(this,2,a,arguments[1]);return b[1]<<8|b[0]},getInt32:function(a){return unpackI32(get(this,4,a,arguments[1]))},getUint32:function(a){return unpackI32(get(this,4,a,arguments[1]))>>>0},getFloat32:function(a){return unpackIEEE754(get(this,4,a,arguments[1]),23,4)},getFloat64:function(a){return unpackIEEE754(get(this,8,a,arguments[1]),52,8)},setInt8:function(a,b){set(this,1,a,packI8,b)},setUint8:function(a,b){set(this,1,a,packI8,b)},setInt16:function(a,b){set(this,2,a,packI16,b,arguments[2])},setUint16:function(a,b){set(this,2,a,packI16,b,arguments[2])},setInt32:function(a,b){set(this,4,a,packI32,b,arguments[2])},setUint32:function(a,b){set(this,4,a,packI32,b,arguments[2])},setFloat32:function(a,b){set(this,4,a,packF32,b,arguments[2])},setFloat64:function(a,b){set(this,8,a,packF64,b,arguments[2])}});setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW),hide($DataView[PROTOTYPE],$typed.VIEW,!0),exports[ARRAY_BUFFER]=$ArrayBuffer,exports[DATA_VIEW]=$DataView;