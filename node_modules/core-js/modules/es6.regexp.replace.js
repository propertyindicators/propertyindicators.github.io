/*! PILab 02-02-2022 */

"use strict";var anObject=require("./_an-object"),toObject=require("./_to-object"),toLength=require("./_to-length"),toInteger=require("./_to-integer"),advanceStringIndex=require("./_advance-string-index"),regExpExec=require("./_regexp-exec-abstract"),max=Math.max,min=Math.min,floor=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g,maybeToString=function(a){return void 0===a?a:String(a)};require("./_fix-re-wks")("replace",2,function(a,b,c,d){function e(a,b,d,e,f,g){var h=d+a.length,i=e.length,j=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==f&&(f=toObject(f),j=SUBSTITUTION_SYMBOLS),c.call(g,j,function(c,g){var j;switch(g.charAt(0)){case"$":return"$";case"&":return a;case"`":return b.slice(0,d);case"'":return b.slice(h);case"<":j=f[g.slice(1,-1)];break;default:var k=+g;if(0===k)return c;if(k>i){var l=floor(k/10);return 0===l?c:l<=i?void 0===e[l-1]?g.charAt(1):e[l-1]+g.charAt(1):c}j=e[k-1]}return void 0===j?"":j})}return[function(d,e){var f=a(this),g=void 0==d?void 0:d[b];return void 0!==g?g.call(d,f,e):c.call(String(f),d,e)},function(a,b){var f=d(c,a,this,b);if(f.done)return f.value;var g=anObject(a),h=String(this),i="function"==typeof b;i||(b=String(b));var j=g.global;if(j){var k=g.unicode;g.lastIndex=0}for(var l=[];;){var m=regExpExec(g,h);if(null===m)break;if(l.push(m),!j)break;""===String(m[0])&&(g.lastIndex=advanceStringIndex(h,toLength(g.lastIndex),k))}for(var n="",o=0,p=0;p<l.length;p++){m=l[p];for(var q=String(m[0]),r=max(min(toInteger(m.index),h.length),0),s=[],t=1;t<m.length;t++)s.push(maybeToString(m[t]));var u=m.groups;if(i){var v=[q].concat(s,r,h);void 0!==u&&v.push(u);var w=String(b.apply(void 0,v))}else w=e(q,h,r,s,u,b);r>=o&&(n+=h.slice(o,r)+w,o=r+q.length)}return n+h.slice(o)}]});