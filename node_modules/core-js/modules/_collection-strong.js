/*! PILab 24-01-2021 (c) 2021 propertyindicators@gmail.com */

"use strict";var dP=require("./_object-dp").f,create=require("./_object-create"),redefineAll=require("./_redefine-all"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),$iterDefine=require("./_iter-define"),step=require("./_iter-step"),setSpecies=require("./_set-species"),DESCRIPTORS=require("./_descriptors"),fastKey=require("./_meta").fastKey,validate=require("./_validate-collection"),SIZE=DESCRIPTORS?"_s":"size",getEntry=function(a,b){var c,d=fastKey(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};module.exports={getConstructor:function(a,b,c,d){var e=a(function(a,f){anInstance(a,e,b,"_i"),a._t=b,a._i=create(null),a._f=void 0,a._l=void 0,a[SIZE]=0,void 0!=f&&forOf(f,c,a[d],a)});return redefineAll(e.prototype,{clear:function(){for(var a=validate(this,b),c=a._i,d=a._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];a._f=a._l=void 0,a[SIZE]=0},delete:function(a){var c=validate(this,b),d=getEntry(c,a);if(d){var e=d.n,f=d.p;delete c._i[d.i],d.r=!0,f&&(f.n=e),e&&(e.p=f),c._f==d&&(c._f=e),c._l==d&&(c._l=f),c[SIZE]--}return!!d},forEach:function(a){validate(this,b);for(var c,d=ctx(a,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;)for(d(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!getEntry(validate(this,b),a)}}),DESCRIPTORS&&dP(e.prototype,"size",{get:function(){return validate(this,b)[SIZE]}}),e},def:function(a,b,c){var d,e,f=getEntry(a,b);return f?f.v=c:(a._l=f={i:e=fastKey(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[SIZE]++,"F"!==e&&(a._i[e]=f)),a},getEntry:getEntry,setStrong:function(a,b,c){$iterDefine(a,b,function(a,c){this._t=validate(a,b),this._k=c,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?step(0,c.k):"values"==b?step(0,c.v):step(0,[c.k,c.v]):(a._t=void 0,step(1))},c?"entries":"values",!c,!0),setSpecies(b)}};