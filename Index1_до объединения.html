<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Сайт индикаторов рынка недвижимости</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
    
<body>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.js"></script>
    <!-- Google Vizualization plugins -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <div class="container">
        <div class="row">
            <div class="col-lg-4"></div>
            <div class="col-lg-4"></div> 
            <div class="col-lg-4"></div>
            <div class="col-lg-4"></div>
        </div>
    </div>
    
    <div class="container">
        <h1> Привет, Игорь!</h1>
        <button type="button" class="btn btn-warning">с 2010 года</button>
        <button type="button" class="btn btn-warning">5 лет</button>
        <button type="button" class="btn btn-warning">3 года</button>
        <button type="button" class="btn btn-warning">2 года</button>
        <button type="button" class="btn btn-warning">1 год</button>
        <button type="button" class="btn btn-warning">полгода</button>
        <button type="button" class="btn btn-warning">квартал</button>
    </div>
    
    
    
   <div id="chart_div1" style="width: 100%; height: 500px;"></div>
   <div id="chart_div2" style="width: 100%; height: 500px;"></div> 

    <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(initialize);
    google.charts.setOnLoadCallback(initialize2);

    function initialize() {
        //https://fusiontables.google.com/data?docid=1X2Ebdsm9VQle-lNlqeQV1t2D3K9U-R2Y5ONxQZon
        var tableid = '1X2Ebdsm9VQle-lNlqeQV1t2D3K9U-R2Y5ONxQZon';
        var uri = "SELECT 'Дата', 'Центр', 'Прицентральная','Серединная', 'Периферия' FROM " + tableid;
        var queryText = "http://www.google.com/fusiontables/gvizdata?tq=" + encodeURIComponent(uri);
        var query = new google.visualization.Query(queryText);
        // Send the query with a callback function.
        query.send(handleQueryResponse);
    }

    function handleQueryResponse(response) {
        if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }
        var data = response.getDataTable();
        drawChart(data);
    }

    function drawChart(data) {

        var options = {
            title: 'Динамика цен аренды на нежилые помещения в г.Киеве',
            hAxis: {title: 'Периоды (годы)',  titleTextStyle: {color: '#333'}},
            vAxis: {minValue: 0}
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
    }
        
    function initialize2() {
        //https://fusiontables.google.com/data?docid=1X2Ebdsm9VQle-lNlqeQV1t2D3K9U-R2Y5ONxQZon
        var tableid = '1X2Ebdsm9VQle-lNlqeQV1t2D3K9U-R2Y5ONxQZon';
        var uri = "SELECT 'Дата', 'Центр', 'Прицентральная','Серединная', 'Периферия' FROM " + tableid;
        var queryText = "http://www.google.com/fusiontables/gvizdata?tq=" + encodeURIComponent(uri);
        var query = new google.visualization.Query(queryText);
        // Send the query with a callback function.
        query.send(handleQueryResponse2);
    }

    function handleQueryResponse2(response) {
        if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }
        var data = response.getDataTable();
        drawChart2(data);
    }

    function drawChart2(data) {

        var options = {
            title: 'Динамика цен аренды на нежилые помещения в г.Киеве',
            hAxis: {title: 'Периоды (годы)',  titleTextStyle: {color: '#333'}},
            vAxis: {minValue: 0}
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div2'));
        chart.draw(data, options);
    }
    </script>

    <!-- области вывода для третего графика-->

    <div  id="chart_div3" style="width: 1170px; height: 600px;" > </div> 

    <!-- прорисовка 2-го и 3-го графика в JS-->
    <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(initialize3);
        

    
        
        
        function initialize3() {
        //https://docs.google.com/spreadsheets/d/1gIlvJhmxLcYsQHEl3d-R3Gyn-VuNxQcARCThiln3FLo/edit#gid=0
        var tableid = '1gIlvJhmxLcYsQHEl3d-R3Gyn-VuNxQcARCThiln3FLo';
        var uri = "SELECT 'Зона', 'Торговые', 'Офисные' FROM " + tableid;
        var queryText = "http://www.google.com/spreadsheets/d/gvizdata?tq=" + encodeURIComponent(uri);
        
        //var opts = {sendMethod: 'auto'};
  // Replace the data source URL on next line with your data source URL.
  //var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/17OJms10cdbWujsmGZvBhJKo1IaPMni4S1T00hiTFZcU/edit#gid=0', opts);

        
        var query = new google.visualization.Query(queryText);
        // Send the query with a callback function.
        query.send(handleQueryResponse3);
    }

    function handleQueryResponse3(response) {
        if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
        }
        var data = response.getDataTable();
        drawChart3(data);
    }

    function drawChart3(data) {

    var options = {
    title: 'Текущие ставки аренды на нежилые помещения в г.Киеве',
    hAxis: {title: 'Территориальные зоны',  titleTextStyle: {color: '#333'}},
    vAxis: {minValue: 0}
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div3'));
    chart.draw(data, options);
    }
    
 </script>    
    
</body>
</html>
