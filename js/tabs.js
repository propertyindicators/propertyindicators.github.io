/*! PILab 07-01-2018 (c) 2017 propertyindicators@gmail.com */

"use strict";function initheader(){headerdict={z:[tck("allt"),tck("st"),tck("hr"),tck("ser"),tck("mod")],t:[tcz("kiev"),tcz("center"),tcz("nearcenter"),tcz("midcenter"),tcz("periphery")]}}function init_base(){gdata[1]=new MyTab(1,tabinit1),gdata[1].initall(!0)}function MyTab(a,b){this.tabinit=b,this.id=+a,this.basepress=0,this.rxpress="x",this.curpress="d",this.buttons={},this.options={},this.tabs=[],this.chart={},this.finaldate=[],this.create_chart=function(){this.chart=new google.visualization.Table(document.getElementById("tab_div_"+this.id))},this.create_buttons=function(){for(var a=0;a<b.length;a++)this.buttons[a]=document.getElementById("buttb_"+this.id+String(a)),this.buttons[a].onclick=basebuttonfunc;var c=this;rxkeys.forEach(function(a,b,d){c.buttons[a]=document.getElementById("butti_"+c.id+a),c.buttons[a].onclick=ibuttonfunc}),currencykeys.forEach(function(a,b,d){c.buttons[a]=document.getElementById("buttc_"+c.id+a),c.buttons[a].onclick=curbuttonfunc})},this.create_options=function(){this.options={animation:{duration:1e3,easing:"linear",startup:!0},width:"100%",height:"100%"}},this.create_tabs_and_firstdraw=function(a){GET_DT_FROM_FILE=a;var c="fusion";a&&(c="file");var d=this;b.forEach(function(a,b,e){GET_DTAsync(a[c],a.sql,function(a){d.set_tabs(a,b),b===d.basepress&&d.drawchart()})})},this.set_tabs=function(a,c){for(var d=a.toJSON(),e=JSON.parse(d),f=[[tcitabs("firstcol")],[tcitabs("firstcol")]],g=0;g<e.rows.length;g++)f[0][g+1]=e.rows[g].c[4].v,g>0&&(f[1][g]=e.rows[g].c[getlang()].v);for(var h={},i=0;i<2;i++){for(var j={},k=0;k<3;k++){var l=[];l[0]=f[i];for(var m=0;m<b[c].rows.length;m++){for(var n=[tcitabs(b[c].rows[m])],o=0;o<e.rows.length;o++)0===i?n[o+1]=e.rows[o].c[5+2*b[c].rows.length*k+2*m+i].v:o>0&&(n[o]=e.rows[o].c[5+2*b[c].rows.length*k+2*m+i].v);l[1+m]=n}j[currencykeys[k]]=google.visualization.arrayToDataTable(l)}h[rxkeys[i]]=j}this.tabs[c]=h,this.finaldate[c]=e.rows[0].c[4].v},this.initall=function(a){this.create_chart(),this.create_buttons(),this.create_options(),this.create_tabs_and_firstdraw(a)},this.drawchart=function(){this.chart.draw(this.tabs[this.basepress][this.rxpress][this.curpress],this.options),document.getElementById("tab_notes_"+this.id).innerHTML="<h6>*"+tcitabs("notdat")+" "+this.finaldate[this.basepress]+"</h6>"}}function basebuttonfunc(){var a=$(this).attr("id"),b=a.substring(6,7),c=+a.substring(7,8);c!==gdata[b].basepress&&(gdata[b].basepress=c,gdata[b].drawchart())}function curbuttonfunc(){var a=$(this).attr("id"),b=a.substring(6,7),c=a.substring(7,8);c!==gdata[b].curpress&&(gdata[b].curpress=c,gdata[b].drawchart())}function ibuttonfunc(){var a=$(this).attr("id"),b=a.substring(6,7),c=a.substring(7,8);c!==gdata[b].rxpress&&(gdata[b].rxpress=c,gdata[b].drawchart())}var currencykeys=["d","h","e"],rxkeys=["r","x"],formatdict={d:"$#",h:"₴#",e:"€#"},headerdict={},specdict={s:"ressqm",f:"resflat"},fieldsdict={z:["Name","D_AV_1","D_AV_2","D_AV_3","D_AV_4","D_STA_1","D_STA_2","D_STA_3","D_STA_4","D_HRU_1","D_HRU_2","D_HRU_3","D_HRU_4","D_SER_1","D_SER_2","D_SER_3","D_SER_4","D_MOD_1","D_MOD_2","D_MOD_3","D_MOD_4","H_AV_1","H_AV_2","H_AV_3","H_AV_4","H_STA_1","H_STA_2","H_STA_3","H_STA_4","H_HRU_1","H_HRU_2","H_HRU_3","H_HRU_4","H_SER_1","H_SER_2","H_SER_3","H_SER_4","H_MOD_1","H_MOD_2","H_MOD_3","H_MOD_4","E_AV_1","E_AV_2","E_AV_3","E_AV_4","E_STA_1","E_STA_2","E_STA_3","E_STA_4","E_HRU_1","E_HRU_2","E_HRU_3","E_HRU_4","E_SER_1","E_SER_2","E_SER_3","E_SER_4","E_MOD_1","E_MOD_2","E_MOD_3","E_MOD_4"],t:["Name","D_K_1","D_K_2","D_K_3","D_K_4","D_C_1","D_C_2","D_C_3","D_C_4","D_NC_1","D_NC_2","D_NC_3","D_NC_4","D_EV_1","D_EV_2","D_EV_3","D_EV_4","D_P_1","D_P_2","D_P_3","D_P_4","H_K_1","H_K_2","H_K_3","H_K_4","H_C_1","H_C_2","H_C_3","H_C_4","H_NC_1","H_NC_2","H_NC_3","H_NC_4","H_EV_1","H_EV_2","H_EV_3","H_EV_4","H_P_1","H_P_2","H_P_3","H_P_4","E_K_1","E_K_2","E_K_3","E_K_4","E_C_1","E_C_2","E_C_3","E_C_4","E_NC_1","E_NC_2","E_NC_3","E_NC_4","E_EV_1","E_EV_2","E_EV_3","E_EV_4","E_P_1","E_P_2","E_P_3","E_P_4"]},chartindexdict=["zs","zf","ts","tf"],chartsourcedict={zs:{file:"resdiagzonessqm",fusion:""},zf:{file:"resdiagzonesflat",fusion:""},ts:{file:"resdiagtypessqm",fusion:""},tf:{file:"resdiagtypesflat",fusion:""}},colorsdict={z:["#0000FF","#FF0000","#FFFF00","#008000"],t:["#008080","#9400D3","#DC143C","#006400"]},gdata={};google.charts.load("visualization","1",{packages:["table"]}),google.charts.setOnLoadCallback(init_base);var tabinit1=[{file:"resindexrooms",fusion:"",rows:["allres","1r","2r","3r","4r"],sql:""},{file:"resindextypes",fusion:"",rows:["allres","sta","hru","ser","mod"],sql:""},{file:"resindexzones",fusion:"",rows:["allres","c","nc","m","o"],sql:""}];