/*! PILab 02-02-2022 */

"use strict";function objectListReducer(a,b){switch(void 0===a&&(a=state_1.initObjectListState),console.log(b),b.type){case actions_1.EObjectListActions.InitData:return a.DocExtractor=new service_doc_extractor_1.DocExtractor,a.CalcService=new service_calc_historical_1.CalcHistoricalUI(a.DocExtractor),a;case actions_1.EObjectListActions.GoogleChartsLoaded:return a.GoogleChartsLoaded=!0,a;case actions_1.EObjectListActions.CnLoaded:var c=b.payload;return a.DocExtractor.cn=c,a.CustomerName=c.GetAuthName(),a;case actions_1.EObjectListActions.CnDocLoaded:return a.DocExtractor.cnDoc=b.payload,a;case actions_1.EObjectListActions.ParamDictLoaded:return a.DocExtractor.paramDict=b.payload,a;case actions_1.EObjectListActions.GetObjRows:return a.ObjRows=a.DocExtractor.CreateObjectList(),a.IsObjListEmpty=a.ObjRows.length<1,a;case actions_1.EObjectListActions.SelectObject:return a.SelectedObjIndex===b.payload?a:(a.SelectedObjIndex=b.payload,a.ParamsViewData=a.DocExtractor.ExtractPremisesParams(a.SelectedObjIndex),a.HistoryViewData=a.CalcService.CreateObjView(a.SelectedObjIndex),a);case actions_1.EObjectListActions.DeleteObject:return a.IndexToDelete=b.payload,a.IsDeletingAction=!0,a;case actions_1.EObjectListActions.ObjectDeleted:return a.IsDeletingAction=!1,(a.ObjRows=a.DocExtractor.CreateObjectList(),-1===a.SelectedObjIndex)?(a.ObjRows.length<1&&(a.IsObjListEmpty=!0),a.IndexToDelete=-1,a):(a.IndexToDelete===a.SelectedObjIndex?(a.ObjRows.length<1?(a.IsObjListEmpty=!0,a.SelectedObjIndex=-1):a.SelectedObjIndex>a.ObjRows.length-1&&(a.SelectedObjIndex=a.ObjRows.length-1),a.ParamsViewData=a.DocExtractor.ExtractPremisesParams(a.SelectedObjIndex),a.HistoryViewData=a.CalcService.CreateObjView(a.SelectedObjIndex)):a.IndexToDelete<a.SelectedObjIndex&&a.SelectedObjIndex--,a.IndexToDelete=-1,a);case actions_1.EObjectListActions.ServerError:return console.log(b.payload),alert(b.payload),a.IsDeletingAction=!1,a;case actions_1.EObjectListActions.SetDataReady:return a.DataReady=!0,a;case actions_1.EObjectListActions.DoNothing:b.payload&&console.log(b.payload),console.log(a.GoogleChartsLoaded&&a.DocExtractor.cnDoc&&a.DocExtractor.paramDict);default:return a}}Object.defineProperty(exports,"__esModule",{value:!0});var router_store_1=require("@ngrx/router-store"),state_1=require("./state"),actions_1=require("./actions"),service_calc_historical_1=require("../service.calc-historical"),service_doc_extractor_1=require("../service.doc-extractor");exports.objectListReducer=objectListReducer,exports.appReducers={router:router_store_1.routerReducer,ObjectListState:objectListReducer};