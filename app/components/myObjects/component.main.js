/*! PILab 18-04-2021 */

"use strict";var __decorate=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},__metadata=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),service_doc_extractor_1=require("./service.doc-extractor"),service_param_dict_1=require("./service.param-dict"),rxjs_1=require("rxjs"),MainComponent=function(){function a(a){this.paramDictDownloader=a,this.objectsVisible="block",this.paramsAndHistoryistoryVisible="block",this.dataReady=!1,this.uiDictReady=!1,this.cnDocReady=!1,this.selectedObj=0,this.notifyChildWhenObjSelected=new rxjs_1.Subject,this.docExtractor=new service_doc_extractor_1.DocExtractor}return a.prototype.ngOnInit=function(){var a=this;Cn?this.onCnReady(Cn):PageAuthActions=this.onCnReady,this.paramDictDownloader.Download().then(function(b){a.docExtractor.paramDict=b,a.uiDictReady=!0,a.cnDocReady&&(a.dataReady=!0),console.log("Main component - ngOnInit - paramDictDownloader")}).catch(function(a){return alert("Ошибка загрузки данных с сервера (Param Dictionaries): \n"+a.message)})},a.prototype.onCnReady=function(a){var b=this;this.cn=a,a.Get(function(a){b.docExtractor.cnDoc=a,b.cnDocReady=!0,b.uiDictReady&&(b.dataReady=!0),console.log("Main component - ngOnInit - PageAuthActions - cn.Get:"),console.log(b.dataReady)},function(a){return alert("Ошибка загрузки данных с сервера (cnDoc): \n"+a)})},a.prototype.onObjSelected=function(a){this.selectedObj=a,this.notifyChildWhenObjSelected.next(a)},a=__decorate([core_1.Component({selector:"main-app",moduleId:module.id,templateUrl:"component.main.html",providers:[service_param_dict_1.ParamDictDownloader]}),__metadata("design:paramtypes",[service_param_dict_1.ParamDictDownloader])],a)}();exports.MainComponent=MainComponent;